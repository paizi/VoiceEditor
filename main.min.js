JSONEditor.defaults.options.disable_properties=!0,JSONEditor.defaults.options.disable_array_reorder=!0,JSONEditor.defaults.options.theme="bootstrap4";const defaultSchema={title:"Root",type:"object",required:["voices"],properties:{voices:{type:"array",format:"tabs",title:"Voices",uniqueItems:!0,items:{type:"object",title:"分类",required:["categoryName","categoryDescription","voiceList"],properties:{categoryName:{type:"string",title:"分类名"},categoryDescription:{type:"object",title:"分类描述",description:"",properties:{"zh-CN":{type:"string",default:""},"ja-JP":{type:"string",default:""},"en-US":{type:"string",default:""}},required:["zh-CN","ja-JP","en-US"]},voiceList:{type:"array",format:"tabs",title:"声音列表",uniqueItems:!1,items:{type:"object",title:"声音",required:["name","path","description"],properties:{name:{type:"string",title:"声音名"},path:{type:"string",title:"声音位置"},description:{type:"object",title:"声音描述",description:"",properties:{"zh-CN":{type:"string",default:""},"ja-JP":{type:"string",default:""},"en-US":{type:"string",default:""}}}}}}}}}}};let data={},defaultOptions={object_layout:"normal",schema:defaultSchema,show_errors:"interaction"},jsoneditor=null,directLink=document.querySelector("#direct-link");const head=document.getElementsByTagName("head")[0],jsonEditorForm=document.querySelector("#json-editor-form"),outputTextarea=document.querySelector("#output-textarea"),setSchema=document.querySelector("#setschema"),setValue=document.querySelector("#setvalue"),themeLink=document.querySelector("#theme-link"),validateTextarea=document.querySelector("#validate-textarea"),parseUrl=()=>{const e=window.location.search,t=e.substring(1,e.length),a=t.split("&");t.length&&a.forEach(e=>{const t=e.split("="),a=t[0],r=t[1];if("data"===a)try{data=JSON.parse(LZString.decompressFromBase64(r))}catch(e){}}),mergeOptions()},mergeOptions=()=>{data.options=Object.assign(defaultOptions,data.options),refreshUI()},refreshUI=()=>{(data.selectedLibs||data.unselectedLibs)&&(data.unselectedLibs.forEach(e=>{libMapping[e].js.concat(libMapping[e].css).forEach(()=>{const t=".external_"+e,a=head.querySelector(t);a&&a.parentNode.removeChild(a)})}),data.selectedLibs.forEach(e=>{libMapping[e].js.forEach(t=>{let a=document.createElement("script");a.type="text/javascript",a.src=t,a.async=!1,a.classList.add("external_"+e),head.appendChild(a)}),libMapping[e].css.forEach(t=>{const a=document.createElement("link");a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",t),a.classList.add("external_"+e),head.appendChild(a)})})),initJsoneditor()},initJsoneditor=()=>{jsoneditor&&jsoneditor.destroy(),(jsoneditor=new window.JSONEditor(jsonEditorForm,data.options)).on("change",function(){let e=jsoneditor.getValue();outputTextarea.value=JSON.stringify(e,null,2);let t=jsoneditor.validate();t.length?validateTextarea.value=JSON.stringify(t,null,2):validateTextarea.value="valid"}),updateDirectLink()},updateDirectLink=()=>{let e=window.location.href.replace(/\?.*/,"");e+="?data=",e+=LZString.compressToBase64(JSON.stringify(data)),directLink.href=e};setValue.addEventListener("click",function(){jsoneditor.setValue(JSON.parse(outputTextarea.value))}),parseUrl();